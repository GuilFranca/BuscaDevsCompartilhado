<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cadastro</title>
    <link rel="stylesheet" href="./css/geral.css">
    <script src="https://kit.fontawesome.com/c9957cc5bb.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="">
    <link rel="icon" type="image/png" href="./img/imagens/BDlogo.png">
    <script src="https://kit.fontawesome.com/c9957cc5bb.js" crossorigin="anonymous"></script>
</head>

<body>
    <!-- Chama as particulas -->
<div id="particles-js-2"></div>
    
    <!-- Início Header -->

    <header>

        <a href="index.html"><img src="./img/imagens/BDlogo.png" alt="Logo"></a>

        <nav class="usuario">
            <ul>
                <li><a href="index.html" class="landing-contratante">Eu quero contratar</a></li>
                <li><a href="trabalhar.html" class="landing-freelancer">Eu quero trabalhar</a></li>

            </ul>
        </nav>

        <ul class="login">
            <li><a href="login.html" class="facaLogin">Faça login</a></li>
            <li><a href="cadastro.html" class="cadastro">Cadastre-se</a></li>
        </ul>

    </header>

    <!-- FIM Header -->

    <section class="cadastro-section">
        <div class="cadastro-container">
            <h1>Cadastro</h1>
            <form id="cadastro-form">
                <label for="name">Nome:</label>
                <input type="text" id="name" name="nome" minlength="0" maxlength="30" size="8"
                    placeholder="Digite seu Nome">
                <label for="sobrenome">Sobrenome:</label>
                <input type="text" id="sobrenome" name="sobrenome" minlength="2" maxlength="50" size="8"
                    placeholder="Digite seu Sobrenome">
                <label for="email">Email:</label>
                <input type="email" id="email-cd" name="email" placeholder="Digite seu email" required>
                <label for="password">Senha:</label>
                <input type="password" id="password-cd" name="password" minlength="4" maxlength="50" size="8"
                    placeholder="Digite sua senha" required>

                <button type="submit" class="btn-cadastro" id="btn-cadastro">Cadastrar!</button>
            </form>
            <p><a href="./login.html">Login</a></p>
        </div>
        <div id="feedback-success">Cadastro realizado com sucesso!</div>
        <div id="feedback-error">Erro no cadastro! Tente novamente.</div>
    </section>
    <footer>

        <div class="navegação__footer">

            <ul class="navegação__lista">
                <li class="lista__nav-titulo">NAVEGAÇÃO</li>
                <li><a href="index.html">Home</a></li>
                <li><a href="index.html">Contratar</a></li>
                <li><a href="trabalhar.html">Trabalhar</a></li>
            </ul>

        </div>


        <img src="./img/imagens/BDlogo.png" alt="Logo buscadev's">


    </footer>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="./Js/app2.js"></script>

    <!-- <script type="text/javascript" src="./Js/script.js"></script> -->

    <!-- <script type="text/javascript" src="./Js/cadastro.js"></script> -->

    <!-- Firebase SDK version 9.x.x -->
    <script type="module">
        // Import Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBgXSa4kvCMFlxi4cym0FJXzKvesXcjR3E",
            authDomain: "buscadev-c62c0.firebaseapp.com",
            projectId: "buscadev-c62c0",
            storageBucket: "buscadev-c62c0.appspot.com",
            messagingSenderId: "637398462359",
            appId: "1:637398462359:web:4a7e216041c176077d5ed2",
            measurementId: "G-SRML28ZC9N"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Cadastro com feedback visual
        document.getElementById('cadastro-form').addEventListener('submit', (event) => {
            event.preventDefault(); // Previne o comportamento padrão de envio do formulário

            const email = document.getElementById('email-cd').value;
            const password = document.getElementById('password-cd').value;

            createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    const feedbackSuccess = document.getElementById('feedback-success');
                    feedbackSuccess.classList.add('show');
                    setTimeout(() => feedbackSuccess.classList.remove('show'), 3000);
                    toggleAuthState(true);
                })
                .catch((error) => {
                    const feedbackError = document.getElementById('feedback-error');
                    feedbackError.classList.add('show');
                    feedbackError.innerHTML = 'Erro no cadastro: ' + error.message;
                    setTimeout(() => feedbackError.classList.remove('show'), 3000);
                });
        });

        // Função de login com feedback visual
        document.getElementById('btn-login').addEventListener('click', () => {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            signInWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    const feedbackSuccess = document.getElementById('feedback-success');
                    feedbackSuccess.classList.add('show');
                    setTimeout(() => feedbackSuccess.classList.remove('show'), 3000);
                    toggleAuthState(true);
                })
                .catch((error) => {
                    const feedbackError = document.getElementById('feedback-error');
                    feedbackError.classList.add('show');
                    feedbackError.innerHTML = 'Erro no login: ' + error.message;
                    setTimeout(() => feedbackError.classList.remove('show'), 3000);
                });
        });

        // Função para alternar o estado de autenticação
        function toggleAuthState(isLoggedIn) {
            if (isLoggedIn) {
                document.getElementById('btn-login').style.display = 'none';
                document.getElementById('signup-btn').style.display = 'none';
                document.getElementById('logout-btn').style.display = 'block';
            } else {
                document.getElementById('btn-login').style.display = 'block';
                document.getElementById('signup-btn').style.display = 'block';
                document.getElementById('logout-btn').style.display = 'none';
            }
        }

    </script>
</body>

</html>